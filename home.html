<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>TODOリスト</title>
  </head>
 <body>
   <h1>TODOリスト</h1>
    <input type="radio" name="displayStatus" id="all" value="true"> 全て
    <input type="radio" name="displayStatus" id="doing" value="true"> 作業中
    <input type="radio" name="displayStatus" id="done" value="true"> 完了

    <div id="todoTableArea">
      <table>
        <tr>
          <td style="border-style: none;">
            ID
          </td>
          <td style="border-style: none;">
            コメント
          </td>
          <td style="border-style: none;">
            状態
          </td>
        </tr>
        <tr id="todoTrArea">
        </tr>
      </table>
    </div>

    <h2>新規タスクの追加</h2>
    <input type="text" id="toDoInputArea">
    <input type="submit" value="追加" id="addToDoButton">
    <script type="module">
      class Todo {
        constructor(id, text) {      
          this.id = id;
          this.text = text;
          this.type = "作業中";
        }
      }

      const toDos = [];

      const button = document.getElementById("addToDoButton")
      button.addEventListener("click", createTodoTable, false);

      function addTodo () {
        const id = toDos.length;
        const target = document.getElementById("toDoInputArea")
        const text = target.value;
        toDos.push (new Todo(id, text));
      };

      function displayTodos() {
        toDos.forEach(function( todo ) {
          const tr = document.createElement('tr');
          const nameTd = document.createElement('td');
          nameTd.textContent = todo.text;
          const idTd = document.createElement('td');
          idTd.textContent = todo.id;
          const typeTd = document.createElement('td');
          typeTd.textContent = todo.type;

          const buttonTd = document.createElement('td');
          const changeButton = document.createElement('button');
          changeButton.classList.add("change-button")
          changeButton.dataset.todoId = todo.id;
          changeButton.textContent = todo.type;
          const deleteButton = document.createElement('button');
          deleteButton.classList.add("delete-button")
          deleteButton.dataset.todoId = todo.id;
          deleteButton.textContent = "削除";
          buttonTd.appendChild(changeButton);
          buttonTd.appendChild(deleteButton)

          tr.appendChild(idTd);
          tr.appendChild(nameTd);
          tr.appendChild(typeTd);
          tr.appendChild(buttonTd);
          const target = document.getElementById('todoTrArea');
          target.appendChild(tr);
        });
      }

      function createTodoTable(){
        addTodo ()
        const target = document.getElementById("toDoInputArea")
        target.value = "";
        hideTodos()
        displayTodos()
      };

      function hideTodos() {
        const target = document.getElementById('todoTrArea');
        target.textContent = "";
      }
    </script>
 </body>
</html>